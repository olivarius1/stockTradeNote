# 开发文档

## 一、项目概述

### 目标
本项目旨在开发一个基于本地 CSV 文件的股票/ETF 基金网格交易账本前端应用，实现交易记录展示、收益统计与可视化。

### 技术栈
- **核心框架**：Vue 3 + TypeScript
- **构建工具**：Vite
- **UI 框架**：Element Plus + Tailwind CSS
- **状态管理**：Pinia
- **路由管理**：Vue Router
- **图表库**：ECharts
- **CSV 解析**：PapaParse
- **代码规范**：ESLint + Prettier

### 功能点
1. CSV 数据读取与解析
2. 交易品种展示与筛选
3. 交易明细展示（买卖配对）
4. 收益曲线图表
5. 收益情况统计
6. 响应式交互体验

## 二、开发环境搭建

### 环境要求
- Node.js >= 16.0.0
- npm >= 7.0.0



## 三、功能模块设计

### 1. CSV 数据读取模块
- **功能**：支持本地上传/选择 CSV 文件，解析并校验数据格式
- **实现**：
  - 使用 PapaParse 解析 CSV 文件
  - 使用 TypeScript 定义数据接口
  - 使用 Pinia 存储解析结果
  - 使用 Element Plus 的 Upload 组件实现文件上传

### 2. 交易品种展示模块
- **功能**：展示所有已交易的股票/ETF 基金代码及名称
- **实现**：
  - 使用 Element Plus 的 Select 组件实现品种选择
  - 使用 Pinia 管理品种数据
  - 实现品种搜索和筛选功能

### 3. 交易明细展示模块
- **功能**：以表格形式展示每个品种的每笔交易，买卖成对合并为一行
- **实现**：
  - 使用 Element Plus 的 Table 组件展示交易数据
  - 实现买卖配对逻辑
  - 支持排序和筛选
  - 使用 TypeScript 类型定义确保数据安全

### 4. 收益曲线图表模块
- **功能**：展示所选品种的收益变化曲线
- **实现**：
  - 使用 ECharts 绘制折线图
  - 实现图表自适应
  - 支持多品种数据对比
  - 添加图表交互功能

### 5. 收益情况统计模块
- **功能**：计算每笔交易的盈亏、累计收益
- **实现**：
  - 使用 TypeScript 实现收益计算逻辑
  - 使用 Element Plus 的 Card 组件展示统计数据
  - 实现数据导出功能

### 6. 交互体验模块
- **功能**：响应式布局，适配桌面/移动端
- **实现**：
  - 使用 Tailwind CSS 实现响应式布局
  - 使用 Element Plus 的组件实现交互
  - 实现深色模式支持

## 五、开发流程与任务分解

### 阶段一：项目初始化与基础架构
- [x] 1. 项目初始化与依赖安装
- [x] 2. 配置 TypeScript、ESLint、Prettier
- [x] 3. 配置 Tailwind CSS
- [x] 4. 设置路由和状态管理
- [x] 5. 创建基础组件结构

### 阶段二：核心功能开发
- [x] 1. 实现 CSV 文件上传与解析
- [x] 2. 开发交易数据表格组件
- [ ] 3. 实现买卖配对逻辑
- [ ] 4. 开发收益曲线图表
- [ ] 5. 实现收益统计功能
- [ ] 6. (新增) 表格筛选、排序与分页功能

### 阶段三：优化与完善
- [ ] 1. 实现响应式布局
- [ ] 2. 添加深色模式支持
- [ ] 3. 优化性能
- [ ] 4. 完善错误处理
- [ ] 5. 添加单元测试

## 六、测试与部署

### 本地开发
```bash
# 启动开发服务器
npm run dev

# 代码检查
npm run lint

# 类型检查
npm run type-check
```

### 构建部署
```bash
# 构建生产环境代码
npm run build

# 预览构建结果
npm run preview
```

### 部署要求
- 支持静态文件托管的 Web 服务器（如 Nginx）
- 配置适当的缓存策略
- 启用 Gzip 压缩
- 配置 HTTPS
